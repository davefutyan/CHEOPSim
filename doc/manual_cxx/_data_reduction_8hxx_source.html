<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CHEOPSim: simulator/include/DataReduction.hxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cheops-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CHEOPSim
   &#160;<span id="projectnumber">06</span>
   </div>
   <div id="projectbrief">Simulation software for CHEOPS SOC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f56d48452e298091a290bc1200c44e7b.html">simulator</a></li><li class="navelem"><a class="el" href="dir_ea41d8120abd8bc801c9a4c1c0a13e45.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">DataReduction.hxx</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * DataReduction.hxx</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  Created on: Dec 20, 2013</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *      Author: futyand</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#ifndef _DATA_REDUCTION_HXX_</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#define _DATA_REDUCTION_HXX_</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;boost/math/tools/stats.hpp&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;boost/random/mersenne_twister.hpp&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;boost/random/poisson_distribution.hpp&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;boost/random/normal_distribution.hpp&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;boost/random/variate_generator.hpp&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;SCI_COR_Lightcurve.hxx&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;SIM_ANA_Noisecurve.hxx&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;Photometry.hxx&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;Module.hxx&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">typedef</span> boost::variate_generator&lt;boost::mt19937,boost::poisson_distribution&lt;int,double&gt; &gt; RANDOM_POISSON;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">typedef</span> boost::variate_generator&lt;boost::mt19937,boost::normal_distribution&lt;double&gt; &gt; RANDOM_GAUSS;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="class_data_reduction.html">   41</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_data_reduction.html">DataReduction</a>: <span class="keyword">public</span> <a class="code" href="class_module.html">Module</a> {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="class_data_reduction.html">DataReduction</a>() : <a class="code" href="class_module.html#ae0a73efd635fc18f1ba321832e1ae05b">Module</a>(<span class="stringliteral">&quot;DataReduction&quot;</span>,<a class="code" href="class_module.html#ac47ec2094c2373341b6b9e2cce7b12bca5dd3a2edeb11d510790e6173ed9e9727">end</a>), <a class="code" href="class_data_reduction.html#a04ec0ee7bdb9ba77a6ac3a684d895a66">m_imageDirectory</a>(<span class="stringliteral">&quot;null&quot;</span>),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            <a class="code" href="class_data_reduction.html#acb4cb8a6e500800986aab6f5a494b063">m_writeIncidentLightCurve</a>(<span class="keyword">true</span>),<a class="code" href="class_data_reduction.html#ab72b06a90bc9c9fe3568e9127b2e2864">m_extractLightCurve</a>(<span class="keyword">true</span>), <a class="code" href="class_data_reduction.html#a297768ee6640d911aff623ce67165f4e">m_generateNoiseCurve</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            <a class="code" href="class_data_reduction.html#af7170245f67e41a53d0ead5ff51f3e58">m_truthBarycentre</a>(<span class="keyword">true</span>),<a class="code" href="class_data_reduction.html#a67f4b065a2494dccd2ab0734b58a9ea0">m_subtractFlatField</a>(<span class="keyword">false</span>){}</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">virtual</span> ~<a class="code" href="class_data_reduction.html">DataReduction</a>() {<span class="keyword">delete</span> <a class="code" href="class_data_reduction.html#a780ff9c7ef39415bb42e24d2e9f08942">m_photometry</a>; <span class="keyword">delete</span> <a class="code" href="class_data_reduction.html#a03d6723b2c4290062d5b7563c84121ba">m_poissonNoiseGenerator</a>; <span class="keyword">delete</span> <a class="code" href="class_data_reduction.html#a1a0bb78a6b80ecd91fdb3f8b82c67397">m_gaussianNoiseGenerator</a>;};</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a502c2f8301c7f0dbf997b99da38a5c2d">initialize</a>(<span class="keyword">const</span> ModuleParams &amp; params);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#add2ae86b0e9ba53b9602f515509ac09d">doBegin</a>(<a class="code" href="class_data.html">Data</a> * data, <span class="keywordtype">bool</span> fullFrame=<span class="keyword">false</span>);</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="class_data_reduction.html#aca48f611bd601bc5add6922eb6d745ae">   50</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#aca48f611bd601bc5add6922eb6d745ae">process</a>(<a class="code" href="class_data.html">Data</a> * data, <span class="keywordtype">int</span> timeStep, <span class="keywordtype">bool</span> fullFrame=<span class="keyword">false</span>)<span class="keyword"> const </span>{};</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a02e683da2d5cbabb94b4808b2d8754c0">doEnd</a>(<a class="code" href="class_data.html">Data</a> *data) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="struct_data_reduction_1_1_flux.html">   56</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_data_reduction_1_1_flux.html">Flux</a> {</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="struct_data_reduction_1_1_flux.html#aca1b59f09a43e89e4adf12313aa81e45">   67</a></span>&#160;        <a class="code" href="struct_data_reduction_1_1_flux.html#aca1b59f09a43e89e4adf12313aa81e45">Flux</a>(<span class="keywordtype">double</span> flux, UTC midTime, <span class="keywordtype">int</span> status, <span class="keywordtype">double</span> rollAngle, <span class="keywordtype">double</span> centroidX, <span class="keywordtype">double</span> centroidY) : <a class="code" href="struct_data_reduction_1_1_flux.html#ae7adce8380ed348c19e9262bbd14232d">m_flux</a>(flux), <a class="code" href="struct_data_reduction_1_1_flux.html#a355bc694dd5219625682d230b9de9373">m_midTime</a>(midTime),</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="struct_data_reduction_1_1_flux.html#ae7adce8380ed348c19e9262bbd14232d">   68</a></span>&#160;                <a class="code" href="struct_data_reduction_1_1_flux.html#a8341b5973eefd6fb481e13e288eb5226">m_status</a>(status), <a class="code" href="struct_data_reduction_1_1_flux.html#a7f61d43351ca7d55431a28e09d12b134">m_rollAngle</a>(rollAngle), <a class="code" href="struct_data_reduction_1_1_flux.html#a228972313e03206529fefd2918652039">m_centroidX</a>(centroidX), <a class="code" href="struct_data_reduction_1_1_flux.html#a47a427beeb087f94fee40db2f76bb6f7">m_centroidY</a>(centroidY) {};</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="struct_data_reduction_1_1_flux.html#ae7adce8380ed348c19e9262bbd14232d">m_flux</a>; </div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="struct_data_reduction_1_1_flux.html#a355bc694dd5219625682d230b9de9373">   70</a></span>&#160;        UTC <a class="code" href="struct_data_reduction_1_1_flux.html#a355bc694dd5219625682d230b9de9373">m_midTime</a>; </div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="struct_data_reduction_1_1_flux.html#a8341b5973eefd6fb481e13e288eb5226">   71</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="struct_data_reduction_1_1_flux.html#a8341b5973eefd6fb481e13e288eb5226">m_status</a>; </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_data_reduction_1_1_flux.html#a7f61d43351ca7d55431a28e09d12b134">   72</a></span>&#160;        <span class="keywordtype">double</span> <a class="code" href="struct_data_reduction_1_1_flux.html#a7f61d43351ca7d55431a28e09d12b134">m_rollAngle</a>; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="struct_data_reduction_1_1_flux.html#a228972313e03206529fefd2918652039">   73</a></span>&#160;        <span class="keywordtype">double</span> <a class="code" href="struct_data_reduction_1_1_flux.html#a228972313e03206529fefd2918652039">m_centroidX</a>; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="struct_data_reduction_1_1_flux.html#a47a427beeb087f94fee40db2f76bb6f7">   74</a></span>&#160;        <span class="keywordtype">double</span> <a class="code" href="struct_data_reduction_1_1_flux.html#a47a427beeb087f94fee40db2f76bb6f7">m_centroidY</a>; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    };</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    vector&lt;Flux&gt; <a class="code" href="class_data_reduction.html#a31c847bf3055e3eca136362e34c2172c">extractFluxVector</a>(<a class="code" href="class_data.html">Data</a> * data) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a042f2a5b8c36cd293a830a3ce2392956">extractFluxesFromCube</a>(<a class="code" href="class_data.html">Data</a>* data, <span class="keywordtype">string</span> filename, <span class="keywordtype">int</span> &amp; nFiles, <span class="keywordtype">int</span> &amp; nImages, vector&lt;Flux&gt; &amp; extractedFlux) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#ab2ba9e7b8c4edbeb0fc7ac47cce671b3">setTimeConfigurationFromImageCube</a>(<a class="code" href="class_data.html">Data</a>* data, <span class="keywordtype">unsigned</span> nImages) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a4a759e9093b90c45b19785c55d2f7550">writeIncidentLightCurve</a>(<a class="code" href="class_data.html">Data</a> * data) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a31699d58ae64ce9a433ab362427c8068">writeOutputLightCurves</a>(<a class="code" href="class_data.html">Data</a> * data, vector&lt;Flux&gt; &amp; extractedFlux) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a6e627007269157d825523862245b1b0a">setLightCurveHeaderKeywords</a>(<a class="code" href="class_data.html">Data</a> * data, SciCorLightcurve * lightCurve, UTC lastImageMidTime, <span class="keywordtype">bool</span> photometry=<span class="keyword">false</span>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a5f49f89d6f23d1d347f526e6952f25b6">setLightCurveHeaderKeywordsFromImageCube</a>(SciCorLightcurve * lightCurve, T * imageCube) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a2e535ce9318f2501e73edc328e6e6c8a">setLightCurveHeaderKeywordsWithoutImageCube</a>(<span class="keyword">const</span> <a class="code" href="class_data.html">Data</a> * data, SciCorLightcurve * lightCurve) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#ab80507d02d7302887837a538c5dd4f6e">setLightCurveData</a>(SciCorLightcurve * lightCurve, <span class="keywordtype">double</span> flux, UTC midTime, <span class="keywordtype">int</span> status, <span class="keywordtype">double</span> rollAngle=-1.,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordtype">double</span> centroidX=0., <span class="keywordtype">double</span> centroidY=0., <span class="keywordtype">double</span> locationX=0., <span class="keywordtype">double</span> locationY=0.) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a1b3f671d10063931688b1cf1e7b8ac51">generateNoiseCurve</a>(<span class="keyword">const</span> <a class="code" href="class_data.html">Data</a> * data, <span class="keyword">const</span> vector&lt;double&gt; flux, UTC lastImageMidTime, <span class="keywordtype">string</span> filename) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a958aff2212703f0704826c437d512ef3">setNoiseCurveHeaderKeywordsFromImageCube</a>(SimAnaNoisecurve &amp; noiseCurve, T * imageCube) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_data_reduction.html#a10404d8ce1fcf740ede37a8c7df5df26">writeExtractedFlux</a>(<a class="code" href="class_data.html">Data</a> * data, <span class="keywordtype">double</span> flux) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="class_data_reduction.html#a04ec0ee7bdb9ba77a6ac3a684d895a66">  215</a></span>&#160;    <span class="keywordtype">string</span> <a class="code" href="class_data_reduction.html#a04ec0ee7bdb9ba77a6ac3a684d895a66">m_imageDirectory</a>; </div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="class_data_reduction.html#ac9db493fbb9ebd55c35019048bff7984">  216</a></span>&#160;    <span class="keywordtype">string</span> <a class="code" href="class_data_reduction.html#ac9db493fbb9ebd55c35019048bff7984">m_outputDirectory</a>; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="class_data_reduction.html#acb4cb8a6e500800986aab6f5a494b063">  218</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_data_reduction.html#acb4cb8a6e500800986aab6f5a494b063">m_writeIncidentLightCurve</a>; </div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="class_data_reduction.html#ab72b06a90bc9c9fe3568e9127b2e2864">  219</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_data_reduction.html#ab72b06a90bc9c9fe3568e9127b2e2864">m_extractLightCurve</a>; </div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="class_data_reduction.html#a297768ee6640d911aff623ce67165f4e">  220</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_data_reduction.html#a297768ee6640d911aff623ce67165f4e">m_generateNoiseCurve</a>; </div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="class_data_reduction.html#af7170245f67e41a53d0ead5ff51f3e58">  221</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_data_reduction.html#af7170245f67e41a53d0ead5ff51f3e58">m_truthBarycentre</a>; </div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="class_data_reduction.html#a67f4b065a2494dccd2ab0734b58a9ea0">  222</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_data_reduction.html#a67f4b065a2494dccd2ab0734b58a9ea0">m_subtractFlatField</a>; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="class_data_reduction.html#a780ff9c7ef39415bb42e24d2e9f08942">  224</a></span>&#160;    <a class="code" href="class_photometry.html">Photometry</a> * <a class="code" href="class_data_reduction.html#a780ff9c7ef39415bb42e24d2e9f08942">m_photometry</a>; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="class_data_reduction.html#a03d6723b2c4290062d5b7563c84121ba">  226</a></span>&#160;    RANDOM_POISSON * <a class="code" href="class_data_reduction.html#a03d6723b2c4290062d5b7563c84121ba">m_poissonNoiseGenerator</a>; </div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="class_data_reduction.html#a1a0bb78a6b80ecd91fdb3f8b82c67397">  227</a></span>&#160;    RANDOM_GAUSS * <a class="code" href="class_data_reduction.html#a1a0bb78a6b80ecd91fdb3f8b82c67397">m_gaussianNoiseGenerator</a>; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;};</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _DATA_REDUCTION_HXX_ */</span><span class="preprocessor"></span></div>
<div class="ttc" id="class_data_reduction_html_a958aff2212703f0704826c437d512ef3"><div class="ttname"><a href="class_data_reduction.html#a958aff2212703f0704826c437d512ef3">DataReduction::setNoiseCurveHeaderKeywordsFromImageCube</a></div><div class="ttdeci">void setNoiseCurveHeaderKeywordsFromImageCube(SimAnaNoisecurve &amp;noiseCurve, T *imageCube) const </div><div class="ttdoc">Set the header keywords for the noise curve by copying header keywords from the last image cube to be...</div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:709</div></div>
<div class="ttc" id="class_module_html_ae0a73efd635fc18f1ba321832e1ae05b"><div class="ttname"><a href="class_module.html#ae0a73efd635fc18f1ba321832e1ae05b">Module::Module</a></div><div class="ttdeci">Module(std::string name, SCHEDULE schedule=timeLoop)</div><div class="ttdoc">Constructor initializes module name and scheduling. </div><div class="ttdef"><b>Definition:</b> Module.hxx:43</div></div>
<div class="ttc" id="class_data_html"><div class="ttname"><a href="class_data.html">Data</a></div><div class="ttdoc">Data container for CHEOPSim. </div><div class="ttdef"><b>Definition:</b> Data.hxx:84</div></div>
<div class="ttc" id="class_data_reduction_html_a1b3f671d10063931688b1cf1e7b8ac51"><div class="ttname"><a href="class_data_reduction.html#a1b3f671d10063931688b1cf1e7b8ac51">DataReduction::generateNoiseCurve</a></div><div class="ttdeci">void generateNoiseCurve(const Data *data, const vector&lt; double &gt; flux, UTC lastImageMidTime, string filename) const </div><div class="ttdoc">Generate a noise curve from the data in the extracted light curve. </div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:641</div></div>
<div class="ttc" id="struct_data_reduction_1_1_flux_html_a8341b5973eefd6fb481e13e288eb5226"><div class="ttname"><a href="struct_data_reduction_1_1_flux.html#a8341b5973eefd6fb481e13e288eb5226">DataReduction::Flux::m_status</a></div><div class="ttdeci">int m_status</div><div class="ttdoc">Flag with value 0 to 3 depending on the jitter AOCS and science validity flags. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:71</div></div>
<div class="ttc" id="class_data_reduction_html_ac9db493fbb9ebd55c35019048bff7984"><div class="ttname"><a href="class_data_reduction.html#ac9db493fbb9ebd55c35019048bff7984">DataReduction::m_outputDirectory</a></div><div class="ttdeci">string m_outputDirectory</div><div class="ttdoc">Name of output directory. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:216</div></div>
<div class="ttc" id="class_data_reduction_html_add2ae86b0e9ba53b9602f515509ac09d"><div class="ttname"><a href="class_data_reduction.html#add2ae86b0e9ba53b9602f515509ac09d">DataReduction::doBegin</a></div><div class="ttdeci">void doBegin(Data *data, bool fullFrame=false)</div><div class="ttdoc">Further module initialization with access to data initialized by other modules. Called after precedin...</div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:37</div></div>
<div class="ttc" id="class_data_reduction_html_a02e683da2d5cbabb94b4808b2d8754c0"><div class="ttname"><a href="class_data_reduction.html#a02e683da2d5cbabb94b4808b2d8754c0">DataReduction::doEnd</a></div><div class="ttdeci">void doEnd(Data *data) const </div><div class="ttdoc">For processing of data after the time loop (data reduction) </div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:56</div></div>
<div class="ttc" id="class_data_reduction_html_a03d6723b2c4290062d5b7563c84121ba"><div class="ttname"><a href="class_data_reduction.html#a03d6723b2c4290062d5b7563c84121ba">DataReduction::m_poissonNoiseGenerator</a></div><div class="ttdeci">RANDOM_POISSON * m_poissonNoiseGenerator</div><div class="ttdoc">Poisson random number generator to generate the ideal light curve. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:226</div></div>
<div class="ttc" id="class_data_reduction_html_a780ff9c7ef39415bb42e24d2e9f08942"><div class="ttname"><a href="class_data_reduction.html#a780ff9c7ef39415bb42e24d2e9f08942">DataReduction::m_photometry</a></div><div class="ttdeci">Photometry * m_photometry</div><div class="ttdoc">Pointer to an instance of the Photometry class, used to perform the photometric extraction. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:224</div></div>
<div class="ttc" id="struct_data_reduction_1_1_flux_html_a7f61d43351ca7d55431a28e09d12b134"><div class="ttname"><a href="struct_data_reduction_1_1_flux.html#a7f61d43351ca7d55431a28e09d12b134">DataReduction::Flux::m_rollAngle</a></div><div class="ttdeci">double m_rollAngle</div><div class="ttdoc">Roll angle. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:72</div></div>
<div class="ttc" id="class_data_reduction_html_a2e535ce9318f2501e73edc328e6e6c8a"><div class="ttname"><a href="class_data_reduction.html#a2e535ce9318f2501e73edc328e6e6c8a">DataReduction::setLightCurveHeaderKeywordsWithoutImageCube</a></div><div class="ttdeci">void setLightCurveHeaderKeywordsWithoutImageCube(const Data *data, SciCorLightcurve *lightCurve) const </div><div class="ttdoc">For the case where only an incident light curve is generated such that there are no image cubes...</div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:568</div></div>
<div class="ttc" id="class_data_reduction_html_a5f49f89d6f23d1d347f526e6952f25b6"><div class="ttname"><a href="class_data_reduction.html#a5f49f89d6f23d1d347f526e6952f25b6">DataReduction::setLightCurveHeaderKeywordsFromImageCube</a></div><div class="ttdeci">void setLightCurveHeaderKeywordsFromImageCube(SciCorLightcurve *lightCurve, T *imageCube) const </div><div class="ttdoc">Set the header keywords for a light curve by copying header keywords from the last image cube to be p...</div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:538</div></div>
<div class="ttc" id="class_data_reduction_html_ab80507d02d7302887837a538c5dd4f6e"><div class="ttname"><a href="class_data_reduction.html#ab80507d02d7302887837a538c5dd4f6e">DataReduction::setLightCurveData</a></div><div class="ttdeci">void setLightCurveData(SciCorLightcurve *lightCurve, double flux, UTC midTime, int status, double rollAngle=-1., double centroidX=0., double centroidY=0., double locationX=0., double locationY=0.) const </div><div class="ttdoc">Write a row of the light curve FITS table. </div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:620</div></div>
<div class="ttc" id="struct_data_reduction_1_1_flux_html_a355bc694dd5219625682d230b9de9373"><div class="ttname"><a href="struct_data_reduction_1_1_flux.html#a355bc694dd5219625682d230b9de9373">DataReduction::Flux::m_midTime</a></div><div class="ttdeci">UTC m_midTime</div><div class="ttdoc">UTC mid time of the image from which the flux was extracted. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:70</div></div>
<div class="ttc" id="class_data_reduction_html_a31c847bf3055e3eca136362e34c2172c"><div class="ttname"><a href="class_data_reduction.html#a31c847bf3055e3eca136362e34c2172c">DataReduction::extractFluxVector</a></div><div class="ttdeci">vector&lt; Flux &gt; extractFluxVector(Data *data) const </div><div class="ttdoc">Perform photometric extraction: reads in the set of image cubes and for each cube calls extractFluxes...</div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:89</div></div>
<div class="ttc" id="class_data_reduction_html_acb4cb8a6e500800986aab6f5a494b063"><div class="ttname"><a href="class_data_reduction.html#acb4cb8a6e500800986aab6f5a494b063">DataReduction::m_writeIncidentLightCurve</a></div><div class="ttdeci">bool m_writeIncidentLightCurve</div><div class="ttdoc">Flag to indicate whether or not incident light curves will be output. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:218</div></div>
<div class="ttc" id="struct_data_reduction_1_1_flux_html_a47a427beeb087f94fee40db2f76bb6f7"><div class="ttname"><a href="struct_data_reduction_1_1_flux.html#a47a427beeb087f94fee40db2f76bb6f7">DataReduction::Flux::m_centroidY</a></div><div class="ttdeci">double m_centroidY</div><div class="ttdoc">Y location of centroid w.r.t. bottom edge of exposed part of CCD. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:74</div></div>
<div class="ttc" id="struct_data_reduction_1_1_flux_html_a228972313e03206529fefd2918652039"><div class="ttname"><a href="struct_data_reduction_1_1_flux.html#a228972313e03206529fefd2918652039">DataReduction::Flux::m_centroidX</a></div><div class="ttdeci">double m_centroidX</div><div class="ttdoc">X location of centroid w.r.t. left edge of exposed part of CCD. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:73</div></div>
<div class="ttc" id="class_data_reduction_html_a31699d58ae64ce9a433ab362427c8068"><div class="ttname"><a href="class_data_reduction.html#a31699d58ae64ce9a433ab362427c8068">DataReduction::writeOutputLightCurves</a></div><div class="ttdeci">void writeOutputLightCurves(Data *data, vector&lt; Flux &gt; &amp;extractedFlux) const </div><div class="ttdoc">Write the output light curves, including normalized and O-C curves. </div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:380</div></div>
<div class="ttc" id="class_data_reduction_html_a04ec0ee7bdb9ba77a6ac3a684d895a66"><div class="ttname"><a href="class_data_reduction.html#a04ec0ee7bdb9ba77a6ac3a684d895a66">DataReduction::m_imageDirectory</a></div><div class="ttdeci">string m_imageDirectory</div><div class="ttdoc">Name of directory containing input images, for case where data reduction is performed on a pre-existi...</div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:215</div></div>
<div class="ttc" id="struct_data_reduction_1_1_flux_html_ae7adce8380ed348c19e9262bbd14232d"><div class="ttname"><a href="struct_data_reduction_1_1_flux.html#ae7adce8380ed348c19e9262bbd14232d">DataReduction::Flux::m_flux</a></div><div class="ttdeci">double m_flux</div><div class="ttdoc">Value of the flux from photometric extraction. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:68</div></div>
<div class="ttc" id="class_data_reduction_html_a297768ee6640d911aff623ce67165f4e"><div class="ttname"><a href="class_data_reduction.html#a297768ee6640d911aff623ce67165f4e">DataReduction::m_generateNoiseCurve</a></div><div class="ttdeci">bool m_generateNoiseCurve</div><div class="ttdoc">Flag to indicate whether or not a noise curve will be output. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:220</div></div>
<div class="ttc" id="class_data_reduction_html_a10404d8ce1fcf740ede37a8c7df5df26"><div class="ttname"><a href="class_data_reduction.html#a10404d8ce1fcf740ede37a8c7df5df26">DataReduction::writeExtractedFlux</a></div><div class="ttdeci">void writeExtractedFlux(Data *data, double flux) const </div><div class="ttdoc">Appends the extracted flux from the first image to an ascii file. This can be used together with the ...</div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:738</div></div>
<div class="ttc" id="class_module_html"><div class="ttname"><a href="class_module.html">Module</a></div><div class="ttdoc">Base class for all CHEOPSim modules. </div><div class="ttdef"><b>Definition:</b> Module.hxx:25</div></div>
<div class="ttc" id="class_data_reduction_html_af7170245f67e41a53d0ead5ff51f3e58"><div class="ttname"><a href="class_data_reduction.html#af7170245f67e41a53d0ead5ff51f3e58">DataReduction::m_truthBarycentre</a></div><div class="ttdeci">bool m_truthBarycentre</div><div class="ttdoc">Flag to indicate whether to use the truth barycentre or the barycentre determined by photometry...</div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:221</div></div>
<div class="ttc" id="struct_data_reduction_1_1_flux_html_aca1b59f09a43e89e4adf12313aa81e45"><div class="ttname"><a href="struct_data_reduction_1_1_flux.html#aca1b59f09a43e89e4adf12313aa81e45">DataReduction::Flux::Flux</a></div><div class="ttdeci">Flux(double flux, UTC midTime, int status, double rollAngle, double centroidX, double centroidY)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:67</div></div>
<div class="ttc" id="class_data_reduction_html_a1a0bb78a6b80ecd91fdb3f8b82c67397"><div class="ttname"><a href="class_data_reduction.html#a1a0bb78a6b80ecd91fdb3f8b82c67397">DataReduction::m_gaussianNoiseGenerator</a></div><div class="ttdeci">RANDOM_GAUSS * m_gaussianNoiseGenerator</div><div class="ttdoc">Gaussian random number generator for read noise. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:227</div></div>
<div class="ttc" id="class_data_reduction_html_a4a759e9093b90c45b19785c55d2f7550"><div class="ttname"><a href="class_data_reduction.html#a4a759e9093b90c45b19785c55d2f7550">DataReduction::writeIncidentLightCurve</a></div><div class="ttdeci">void writeIncidentLightCurve(Data *data) const </div><div class="ttdoc">Write the incident light curve, including normalized curve. </div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:284</div></div>
<div class="ttc" id="class_data_reduction_html_a502c2f8301c7f0dbf997b99da38a5c2d"><div class="ttname"><a href="class_data_reduction.html#a502c2f8301c7f0dbf997b99da38a5c2d">DataReduction::initialize</a></div><div class="ttdeci">void initialize(const ModuleParams &amp;params)</div><div class="ttdoc">Initialize the module by reading in parameters from the configuration file. </div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:23</div></div>
<div class="ttc" id="class_data_reduction_html_ab72b06a90bc9c9fe3568e9127b2e2864"><div class="ttname"><a href="class_data_reduction.html#ab72b06a90bc9c9fe3568e9127b2e2864">DataReduction::m_extractLightCurve</a></div><div class="ttdeci">bool m_extractLightCurve</div><div class="ttdoc">Flag to indicate whether or not extracted light curves will be output. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:219</div></div>
<div class="ttc" id="class_data_reduction_html_aca48f611bd601bc5add6922eb6d745ae"><div class="ttname"><a href="class_data_reduction.html#aca48f611bd601bc5add6922eb6d745ae">DataReduction::process</a></div><div class="ttdeci">void process(Data *data, int timeStep, bool fullFrame=false) const </div><div class="ttdoc">Processing of the data. Called for each time step of the simulation if Module::Schedule is timeLoop (...</div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:50</div></div>
<div class="ttc" id="struct_data_reduction_1_1_flux_html"><div class="ttname"><a href="struct_data_reduction_1_1_flux.html">DataReduction::Flux</a></div><div class="ttdoc">Struct to hold the extracted flux time series. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:56</div></div>
<div class="ttc" id="class_module_html_ac47ec2094c2373341b6b9e2cce7b12bca5dd3a2edeb11d510790e6173ed9e9727"><div class="ttname"><a href="class_module.html#ac47ec2094c2373341b6b9e2cce7b12bca5dd3a2edeb11d510790e6173ed9e9727">Module::end</a></div><div class="ttdoc">module should run after the time loop </div><div class="ttdef"><b>Definition:</b> Module.hxx:31</div></div>
<div class="ttc" id="class_data_reduction_html_a67f4b065a2494dccd2ab0734b58a9ea0"><div class="ttname"><a href="class_data_reduction.html#a67f4b065a2494dccd2ab0734b58a9ea0">DataReduction::m_subtractFlatField</a></div><div class="ttdeci">bool m_subtractFlatField</div><div class="ttdoc">Flag to indicate whether or not to perform flat field correction. </div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:222</div></div>
<div class="ttc" id="class_data_reduction_html"><div class="ttname"><a href="class_data_reduction.html">DataReduction</a></div><div class="ttdoc">This module performs a basic photometric extraction from the set of stacked images that have been gen...</div><div class="ttdef"><b>Definition:</b> DataReduction.hxx:41</div></div>
<div class="ttc" id="class_data_reduction_html_a6e627007269157d825523862245b1b0a"><div class="ttname"><a href="class_data_reduction.html#a6e627007269157d825523862245b1b0a">DataReduction::setLightCurveHeaderKeywords</a></div><div class="ttdeci">void setLightCurveHeaderKeywords(Data *data, SciCorLightcurve *lightCurve, UTC lastImageMidTime, bool photometry=false) const </div><div class="ttdoc">Set the header keywords for a light curve, calling either setLightCurveHeaderKeywordsFromImageCube or...</div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:482</div></div>
<div class="ttc" id="class_data_reduction_html_ab2ba9e7b8c4edbeb0fc7ac47cce671b3"><div class="ttname"><a href="class_data_reduction.html#ab2ba9e7b8c4edbeb0fc7ac47cce671b3">DataReduction::setTimeConfigurationFromImageCube</a></div><div class="ttdeci">void setTimeConfigurationFromImageCube(Data *data, unsigned nImages) const </div><div class="ttdoc">For the case where data reduction is run on a pre-existing set of images from an earlier simulation...</div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:257</div></div>
<div class="ttc" id="class_data_reduction_html_a042f2a5b8c36cd293a830a3ce2392956"><div class="ttname"><a href="class_data_reduction.html#a042f2a5b8c36cd293a830a3ce2392956">DataReduction::extractFluxesFromCube</a></div><div class="ttdeci">void extractFluxesFromCube(Data *data, string filename, int &amp;nFiles, int &amp;nImages, vector&lt; Flux &gt; &amp;extractedFlux) const </div><div class="ttdoc">Perform photometric extraction for images within the current image cube and assigns jitter AOCS and s...</div><div class="ttdef"><b>Definition:</b> DataReduction.cxx:157</div></div>
<div class="ttc" id="class_photometry_html"><div class="ttname"><a href="class_photometry.html">Photometry</a></div><div class="ttdoc">Class to perform photometric extraction from an Image. </div><div class="ttdef"><b>Definition:</b> Photometry.hxx:26</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 5 2021 21:04:02 for CHEOPSim by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
